<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Fullscreen Portrait Video</title>
  <style>
    /* Reset */
    html,body{height:100%;margin:0}
    body{display:flex;align-items:center;justify-content:center;background:#000;overflow:hidden;font-family:system-ui,Segoe UI,Roboto,Helvetica,Arial,sans-serif}

    /* Container keeps a portrait aspect ratio even on wide screens */
    .portrait-wrap{
      width: min(480px, 56vh); /* keeps it reasonably sized on very tall screens */
      height: calc(var(--portrait-height, 100vh));
      aspect-ratio: 9 / 16; /* portrait (wide:height = 9:16) — change to taste */
      max-height: 96vh;
      background:#000;
      display:grid;
      place-items:center;
      position:relative;
      box-shadow: 0 20px 60px rgba(0,0,0,0.6);
      border-radius:12px;
      overflow:hidden;
    }

    /* Make the video fully cover the portrait container */
    video{
      width:100%;
      height:100%;
      object-fit:cover;
      display:block;
      -webkit-user-select:none;
      user-select:none;
    }

    /* Play overlay when autoplay is blocked */
    .overlay{
      position:absolute;inset:0;display:flex;align-items:center;justify-content:center;flex-direction:column;gap:16px;
      background:linear-gradient(180deg, rgba(0,0,0,0.15), rgba(0,0,0,0.45));
      color:#fff;text-align:center;padding:24px;backdrop-filter:blur(4px);
    }

    .btn{
      -webkit-appearance:none;appearance:none;border:0;padding:12px 18px;border-radius:999px;font-size:16px;font-weight:600;cursor:pointer;background:rgba(255,255,255,0.95);color:#000;box-shadow:0 6px 20px rgba(0,0,0,0.3);
    }

    .hint{font-size:13px;opacity:0.9}

    /* Subtle small controls at bottom-left */
    .controls{
      position:absolute;left:12px;bottom:12px;display:flex;gap:8px;align-items:center;z-index:5
    }

    .icon-btn{background:rgba(255,255,255,0.85);border-radius:999px;padding:8px 10px;border:0;cursor:pointer;font-weight:600}

    /* Make the container scale on small screens (phones) to full width */
    @media (max-width:700px){
      .portrait-wrap{width:100vw;height:100vh;aspect-ratio:auto;border-radius:0}
    }

  </style>
</head>
<body>

  <div class="portrait-wrap" id="wrap">
    <!-- Replace the src with your portrait-oriented video file. Autoplay of unmuted media may be blocked by browsers. -->
    <video id="bgVideo" playsinline loop preload="auto" poster="assets/poster.jpg">
      <source src="assets/portrait-video.mp4" type="video/mp4">
      Your browser does not support the video tag.
    </video>

    <!-- Separate audio element used to guarantee looping audio independent of the video track -->
    <audio id="bgAudio" loop preload="auto">
      <source src="assets/loop-audio.mp3" type="audio/mpeg">
      Your browser does not support the audio element.
    </audio>

    <!-- Overlay shown when autoplay is blocked or when user needs to start sound -->
    <div class="overlay" id="overlay" style="display:none">
      <button class="btn" id="startBtn">Click to start</button>
      <div class="hint">If you don't hear sound, click the button again or check your system volume. (Autoplay of unmuted media may be blocked by some browsers.)</div>
    </div>

    <!-- Minimal floating controls (play/pause, mute/unmute) -->
    <div class="controls" aria-hidden="false">
      <button class="icon-btn" id="playPause">Pause</button>
      <button class="icon-btn" id="muteUnmute">Mute</button>
    </div>
  </div>

<script>
  const video = document.getElementById('bgVideo');
  const audio = document.getElementById('bgAudio');
  const overlay = document.getElementById('overlay');
  const startBtn = document.getElementById('startBtn');
  const playPause = document.getElementById('playPause');
  const muteUnmute = document.getElementById('muteUnmute');

  let isPlaying = true;
  let isMuted = false;

  // Try to autoplay video + audio. Many browsers block autoplay with sound — we catch the error and show an overlay.
  async function tryAutoplay(){
    try{
      // start video (may be muted by default in browser policy)
      await video.play();
      // try starting audio track as well
      await audio.play();
      overlay.style.display = 'none';
      isPlaying = true;
      updateButtons();
    }catch(err){
      // Autoplay with sound probably blocked — show overlay to ask user interaction.
      overlay.style.display = 'flex';
      isPlaying = false;
      updateButtons();
    }
  }

  // When user clicks the start button, attempt to play both media and unmute
  startBtn.addEventListener('click', async () => {
    try{
      audio.currentTime = 0;
      await video.play();
      await audio.play();
      overlay.style.display = 'none';
      isPlaying = true;
      isMuted = false;
      video.muted = false;
      updateButtons();
    }catch(e){
      console.warn('Playback failed:', e);
    }
  });

  // Play/pause toggle — affects both video and audio
  playPause.addEventListener('click', async () => {
    if(isPlaying){
      video.pause(); audio.pause(); isPlaying = false;
    } else {
      try{ await video.play(); await audio.play(); isPlaying = true; } catch(e){ overlay.style.display = 'flex'; }
    }
    updateButtons();
  });

  // Mute/unmute toggle — only mutes the video element (audio element remains audible unless paused)
  muteUnmute.addEventListener('click', () => {
    isMuted = !isMuted;
    video.muted = isMuted;
    // If user mutes the video but wants to hear the audio track, keep audio unmuted. For convenience, also mirror audio mute.
    audio.muted = isMuted;
    updateButtons();
  });

  function updateButtons(){
    playPause.textContent = isPlaying ? 'Pause' : 'Play';
    muteUnmute.textContent = isMuted ? 'Unmute' : 'Mute';
  }

  // Start trying immediately
  tryAutoplay();

  // Optional: clicking the portrait area toggles play/pause
  document.getElementById('wrap').addEventListener('click', (e) => {
    // don't toggle when clicking control buttons
    if(e.target.closest('.icon-btn') || e.target === startBtn) return;
    playPause.click();
  });

  // Accessibility: allow spacebar to toggle play/pause
  window.addEventListener('keydown', (e) => {
    if(e.code === 'Space'){ e.preventDefault(); playPause.click(); }
  });

</script>
</body>
</html>
